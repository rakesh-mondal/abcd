"use client"

import { useState } from "react"
import { useRouter } from "next/navigation"
import { PageShell } from "@/components/page-shell"
import { CreateButton } from "../../../components/create-button"
import { StatusBadge } from "../../../components/status-badge"
import { subnets, getVMAttachedToSubnet } from "../../../lib/data"
import { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from "../../../components/ui/select"
import { ActionMenu } from "../../../components/action-menu"
import { ShadcnDataTable } from "../../../components/ui/shadcn-data-table"
import { RefreshCw } from "lucide-react"
import { 
  DeleteSubnetVMWarningModal, 
  DeleteSubnetConfirmationModal, 
  DeleteSubnetNameConfirmationModal 
} from "../../../components/modals/delete-subnet-modals"
import { SubnetConnectionModal } from "../../../components/modals/subnet-connection-modal"
import { filterDataForUser, shouldShowEmptyState, getEmptyStateMessage } from "../../../lib/demo-data-filter"
import { EmptyState } from "../../../components/ui/empty-state"

export default function SubnetListPage() {
  const router = useRouter()
  const [deleteStep, setDeleteStep] = useState<"vm-warning" | "confirmation" | "name-confirmation" | null>(null)
  const [selectedSubnet, setSelectedSubnet] = useState<any>(null)
  const [attachedVM, setAttachedVM] = useState<string | null>(null)
  const [connectionModalOpen, setConnectionModalOpen] = useState(false)
  const [connectionSubnet, setConnectionSubnet] = useState<any>(null)

  // Filter data based on user type for demo
  const filteredSubnets = filterDataForUser(subnets)
  const showEmptyState = shouldShowEmptyState() && filteredSubnets.length === 0

  const subnetIcon = (
    <svg width="466" height="224" viewBox="0 0 466 224" fill="none" xmlns="http://www.w3.org/2000/svg" className="w-72">
      <path d="M82.0303 51.6001C188.5 86.2301 307.77 125.56 413.95 161.07C307.48 126.44 188.21 87.1101 82.0303 51.6001Z" fill="#686767"/>
      <path d="M162.71 16.3701L174.15 19.98L174.12 20.0901L162.71 16.3701Z" fill="#686767"/>
      <path d="M185.6 23.6001L197.04 27.21L196.94 27.52L185.53 23.8101L185.6 23.6001Z" fill="#686767"/>
      <path d="M208.48 30.8401L219.91 34.48L219.78 34.8999L208.36 31.22L208.48 30.8401Z" fill="#686767"/>
      <path d="M231.34 38.1299L242.78 41.77L242.62 42.26L231.2 38.5801L231.34 38.1299Z" fill="#686767"/>
      <path d="M254.21 45.4199L265.64 49.0601L265.46 49.6201L254.04 45.9399L254.21 45.4199Z" fill="#686767"/>
      <path d="M277.07 52.71L288.51 56.3501L288.31 56.99L276.88 53.3L277.07 52.71Z" fill="#686767"/>
      <path d="M299.94 60L311.371 63.6399L311.15 64.3501L299.73 60.6699L299.94 60Z" fill="#686767"/>
      <path d="M322.8 67.3201L334.22 71L334.01 71.6499L322.58 68L322.8 67.3201Z" fill="#686767"/>
      <path d="M345.639 74.6799L357.06 78.3601L356.879 78.9399L345.439 75.29L345.639 74.6799Z" fill="#686767"/>
      <path d="M368.48 82.04L379.91 85.72L379.74 86.23L368.311 82.5801L368.48 82.04Z" fill="#686767"/>
      <path d="M391.33 89.3999L402.75 93.0901L402.61 93.52L391.18 89.8701L391.33 89.3999Z" fill="#686767"/>
      <path d="M414.17 96.77L425.59 100.45L425.47 100.81L414.04 97.1599L414.17 96.77Z" fill="#686767"/>
      <path d="M437 104.16L448.41 107.88L448.36 108.04L436.92 104.42L437 104.16Z" fill="#686767"/>
      <path d="M459.821 111.59L465.65 113.49L459.811 111.65L459.821 111.59Z" fill="#686767"/>
      <path d="M4.33984 94.6699L11.9697 97.0701C11.9697 97.0701 11.9997 97.0901 11.9897 97.1101C11.9897 97.1301 11.9697 97.1399 11.9497 97.1299L4.33984 94.6699Z" fill="#686767"/>
      <path d="M19.6003 99.4699L27.2301 101.87C27.2301 101.87 27.3102 101.94 27.2902 101.99C27.2702 102.04 27.2201 102.07 27.1701 102.05L19.5602 99.59C19.5302 99.58 19.5102 99.5399 19.5202 99.5099C19.5302 99.4799 19.5703 99.4599 19.6003 99.4699Z" fill="#686767"/>
      <path d="M34.8694 104.27L42.4992 106.67C42.5792 106.7 42.6293 106.78 42.5993 106.87C42.5693 106.96 42.4891 107 42.3991 106.97L34.7893 104.51C34.7193 104.49 34.6892 104.42 34.7092 104.35C34.7292 104.28 34.7994 104.25 34.8694 104.27Z" fill="#686767"/>
      <path d="M50.1292 109.07L57.7594 111.49C57.8594 111.52 57.9193 111.63 57.8893 111.74C57.8593 111.85 57.7493 111.9 57.6393 111.87L50.0194 109.43C49.9194 109.4 49.8693 109.29 49.8993 109.19C49.9293 109.09 50.0393 109.04 50.1393 109.07H50.1292Z" fill="#686767"/>
      <path d="M65.379 113.91L73.0092 116.33C73.1292 116.37 73.1891 116.49 73.1491 116.61C73.1091 116.73 72.9893 116.79 72.8693 116.75L65.2492 114.31C65.1392 114.27 65.0793 114.16 65.1093 114.05C65.1493 113.94 65.2593 113.88 65.3693 113.91H65.379Z" fill="#686767"/>
      <path d="M80.63 118.75L88.2601 121.17C88.3901 121.21 88.46 121.35 88.42 121.47C88.38 121.6 88.2402 121.67 88.1202 121.63L80.5001 119.19C80.3801 119.15 80.3102 119.02 80.3502 118.9C80.3902 118.78 80.52 118.71 80.64 118.75H80.63Z" fill="#686767"/>
      <path d="M95.8796 123.59L103.51 126.01C103.65 126.05 103.73 126.2 103.68 126.34C103.63 126.48 103.49 126.56 103.35 126.51L95.7297 124.07C95.5997 124.03 95.5197 123.89 95.5697 123.75C95.6097 123.62 95.7496 123.54 95.8896 123.59H95.8796Z" fill="#686767"/>
      <path d="M111.129 128.43L118.76 130.85C118.91 130.9 118.99 131.06 118.95 131.21C118.9 131.36 118.74 131.44 118.59 131.4L110.97 128.96C110.83 128.91 110.75 128.76 110.79 128.62C110.83 128.48 110.989 128.4 111.129 128.44V128.43Z" fill="#686767"/>
      <path d="M126.38 133.27L134.01 135.69C134.17 135.74 134.26 135.91 134.21 136.07C134.16 136.23 133.99 136.32 133.83 136.27L126.21 133.83C126.05 133.78 125.97 133.61 126.02 133.46C126.07 133.3 126.24 133.22 126.39 133.27H126.38Z" fill="#686767"/>
      <path d="M141.639 138.1L149.26 140.52C149.43 140.57 149.53 140.76 149.47 140.93C149.42 141.1 149.23 141.2 149.06 141.14L141.44 138.7C141.27 138.65 141.18 138.47 141.23 138.3C141.28 138.13 141.459 138.04 141.629 138.09L141.639 138.1Z" fill="#686767"/>
      <path d="M156.89 142.94L164.52 145.36C164.7 145.42 164.81 145.61 164.75 145.8C164.69 145.98 164.5 146.09 164.31 146.03L156.69 143.59C156.51 143.53 156.41 143.34 156.47 143.16C156.53 142.98 156.72 142.88 156.89 142.94Z" fill="#686767"/>
      <path d="M172.139 147.78L179.76 150.2C179.96 150.26 180.06 150.47 180 150.67C179.94 150.87 179.73 150.97 179.53 150.91L171.909 148.47C171.719 148.41 171.619 148.21 171.679 148.02C171.739 147.83 171.939 147.73 172.129 147.79L172.139 147.78Z" fill="#686767"/>
      <path d="M187.38 152.63L195 155.07C195.19 155.13 195.29 155.33 195.23 155.52C195.17 155.71 194.97 155.81 194.78 155.75L187.15 153.33C186.96 153.27 186.85 153.06 186.91 152.87C186.97 152.68 187.18 152.57 187.37 152.63H187.38Z" fill="#686767"/>
      <path d="M202.62 157.51L210.24 159.95C210.42 160.01 210.51 160.2 210.46 160.37C210.4 160.55 210.22 160.64 210.04 160.59L202.41 158.17C202.23 158.11 202.13 157.92 202.18 157.73C202.24 157.55 202.43 157.45 202.62 157.5V157.51Z" fill="#686767"/>
      <path d="M217.86 162.39L225.48 164.83C225.65 164.88 225.74 165.06 225.68 165.23C225.63 165.4 225.45 165.49 225.29 165.43L217.67 163.01C217.5 162.96 217.4 162.77 217.46 162.6C217.51 162.43 217.7 162.33 217.87 162.39H217.86Z" fill="#686767"/>
      <path d="M233.099 167.28L240.719 169.72C240.869 169.77 240.959 169.93 240.909 170.09C240.859 170.24 240.699 170.33 240.539 170.28L232.909 167.86C232.749 167.81 232.659 167.64 232.709 167.48C232.759 167.32 232.929 167.23 233.089 167.28H233.099Z" fill="#686767"/>
      <path d="M248.33 172.16L255.949 174.6C256.089 174.65 256.169 174.8 256.129 174.94C256.079 175.08 255.93 175.16 255.79 175.12L248.169 172.7C248.019 172.65 247.939 172.49 247.989 172.35C248.039 172.2 248.2 172.12 248.34 172.17L248.33 172.16Z" fill="#686767"/>
      <path d="M263.57 177.04L271.19 179.48C271.32 179.52 271.39 179.66 271.35 179.79C271.31 179.92 271.17 179.99 271.04 179.95L263.41 177.53C263.27 177.49 263.2 177.34 263.24 177.2C263.28 177.06 263.43 176.99 263.57 177.03V177.04Z" fill="#686767"/>
      <path d="M278.81 181.92L286.43 184.36C286.55 184.4 286.62 184.53 286.58 184.65C286.54 184.77 286.41 184.84 286.29 184.8L278.66 182.38C278.53 182.34 278.47 182.21 278.5 182.08C278.54 181.95 278.67 181.89 278.8 181.92H278.81Z" fill="#686767"/>
      <path d="M294.049 186.8L301.669 189.24C301.779 189.27 301.839 189.39 301.799 189.5C301.769 189.61 301.649 189.67 301.539 189.63L293.909 187.21C293.799 187.17 293.729 187.05 293.769 186.94C293.809 186.83 293.929 186.76 294.039 186.8H294.049Z" fill="#686767"/>
      <path d="M309.279 191.68L316.899 194.13C316.989 194.16 317.039 194.26 317.009 194.35C316.979 194.44 316.879 194.5 316.789 194.46L309.159 192.05C309.059 192.02 308.999 191.91 309.029 191.81C309.059 191.71 309.169 191.65 309.269 191.68H309.279Z" fill="#686767"/>
      <path d="M324.51 196.58L332.12 199.04C332.18 199.06 332.209 199.12 332.189 199.18C332.169 199.24 332.11 199.27 332.05 199.25L324.419 196.85C324.339 196.83 324.3 196.74 324.32 196.67C324.34 196.59 324.429 196.55 324.499 196.57L324.51 196.58Z" fill="#686767"/>
      <path d="M339.739 201.5L347.35 203.96C347.35 203.96 347.389 204 347.379 204.02C347.379 204.05 347.34 204.06 347.32 204.05L339.689 201.65C339.689 201.65 339.619 201.59 339.639 201.55C339.649 201.51 339.699 201.48 339.739 201.5Z" fill="#686767"/>
      <path d="M354.96 206.42L359.77 207.98L354.94 206.46C354.94 206.46 354.92 206.45 354.93 206.44C354.93 206.43 354.94 206.42 354.95 206.43L354.96 206.42Z" fill="#686767"/>
      <path d="M436.8 80.6201L433.4 82.73C433.4 82.73 433.38 82.73 433.37 82.73C433.37 82.72 433.37 82.71 433.37 82.7L436.79 80.6201H436.8Z" fill="#686767"/>
      <path d="M426.6 86.9599L419.8 91.1899C419.75 91.2199 419.68 91.2099 419.65 91.1599C419.62 91.1099 419.63 91.04 419.68 91.01L426.52 86.8501C426.55 86.8301 426.59 86.8501 426.61 86.8701C426.63 86.9001 426.61 86.9399 426.59 86.9599H426.6Z" fill="#686767"/>
      <path d="M413.01 95.41L406.21 99.63C406.12 99.69 406 99.6602 405.95 99.5702C405.9 99.4802 405.92 99.3602 406.01 99.3102L412.85 95.15C412.92 95.11 413.01 95.1301 413.06 95.2001C413.1 95.2701 413.08 95.36 413.01 95.41Z" fill="#686767"/>
      <path d="M399.39 103.84L392.58 108.04C392.48 108.1 392.34 108.07 392.28 107.97C392.22 107.87 392.25 107.73 392.35 107.67L399.18 103.49C399.28 103.43 399.4 103.46 399.46 103.56C399.52 103.66 399.49 103.78 399.39 103.84Z" fill="#686767"/>
      <path d="M385.77 112.25L378.96 116.45C378.84 116.52 378.69 116.49 378.62 116.37C378.55 116.25 378.58 116.1 378.7 116.03L385.53 111.85C385.64 111.78 385.78 111.82 385.85 111.93C385.92 112.04 385.88 112.18 385.77 112.25Z" fill="#686767"/>
      <path d="M372.139 120.66L365.329 124.86C365.199 124.94 365.029 124.9 364.949 124.77C364.869 124.64 364.909 124.47 365.039 124.39L371.87 120.21C371.99 120.13 372.159 120.17 372.229 120.3C372.309 120.42 372.269 120.59 372.139 120.66Z" fill="#686767"/>
      <path d="M358.51 129.07L351.7 133.27C351.56 133.36 351.37 133.31 351.28 133.17C351.19 133.03 351.239 132.84 351.379 132.75L358.21 128.57C358.35 128.49 358.53 128.53 358.61 128.67C358.69 128.81 358.65 128.99 358.51 129.07Z" fill="#686767"/>
      <path d="M344.89 137.47L338.08 141.67C337.92 141.77 337.71 141.72 337.62 141.56C337.52 141.4 337.57 141.19 337.73 141.1L344.56 136.92C344.71 136.83 344.91 136.87 345 137.03C345.09 137.18 345.05 137.38 344.89 137.47Z" fill="#686767"/>
      <path d="M331.26 145.88L324.45 150.08C324.28 150.19 324.05 150.13 323.95 149.96C323.85 149.79 323.9 149.56 324.07 149.46L330.9 145.28C331.07 145.18 331.28 145.23 331.38 145.4C331.48 145.57 331.43 145.78 331.26 145.88Z" fill="#686767"/>
      <path d="M317.63 154.28L310.8 158.46C310.63 158.56 310.42 158.51 310.31 158.34C310.21 158.17 310.26 157.96 310.43 157.85L317.24 153.65C317.41 153.54 317.64 153.6 317.75 153.77C317.86 153.94 317.8 154.17 317.63 154.28Z" fill="#686767"/>
      <path d="M303.97 162.64L297.14 166.82C296.99 166.91 296.79 166.87 296.69 166.71C296.59 166.55 296.64 166.36 296.8 166.27L303.61 162.07C303.77 161.97 303.98 162.02 304.08 162.18C304.18 162.34 304.13 162.55 303.97 162.65V162.64Z" fill="#686767"/>
      <path d="M290.31 170.99L283.48 175.17C283.34 175.25 283.16 175.21 283.08 175.07C283 174.93 283.04 174.75 283.18 174.67L289.99 170.47C290.14 170.38 290.33 170.43 290.42 170.57C290.51 170.72 290.46 170.91 290.32 171L290.31 170.99Z" fill="#686767"/>
      <path d="M276.66 179.35L269.83 183.53C269.71 183.61 269.54 183.57 269.47 183.44C269.39 183.32 269.43 183.15 269.56 183.08L276.37 178.88C276.5 178.8 276.67 178.84 276.75 178.97C276.83 179.1 276.79 179.27 276.66 179.35Z" fill="#686767"/>
      <path d="M263 187.71L256.17 191.89C256.06 191.96 255.92 191.92 255.85 191.81C255.78 191.7 255.82 191.56 255.93 191.49L262.74 187.29C262.86 187.22 263.01 187.25 263.08 187.37C263.15 187.49 263.12 187.64 263 187.71Z" fill="#686767"/>
      <path d="M249.34 196.07L242.51 200.25C242.41 200.31 242.29 200.28 242.23 200.18C242.17 200.08 242.2 199.96 242.3 199.9L249.11 195.7C249.21 195.64 249.35 195.67 249.41 195.77C249.47 195.87 249.44 196.01 249.34 196.07Z" fill="#686767"/>
      <path d="M235.68 204.42L228.84 208.58C228.77 208.62 228.68 208.6 228.63 208.53C228.59 208.46 228.61 208.37 228.68 208.32L235.48 204.1C235.57 204.04 235.69 204.07 235.74 204.16C235.8 204.25 235.77 204.37 235.68 204.42Z" fill="#686767"/>
      <path d="M222 212.74L215.16 216.89C215.16 216.89 215.09 216.89 215.07 216.87C215.05 216.84 215.07 216.8 215.09 216.78L221.89 212.55C221.94 212.52 222.01 212.53 222.04 212.58C222.07 212.63 222.06 212.7 222.01 212.73L222 212.74Z" fill="#686767"/>
      <path d="M208.31 221.04L204.89 223.12L208.29 221.01C208.29 221.01 208.31 221.01 208.32 221.01C208.33 221.01 208.32 221.03 208.32 221.04H208.31Z" fill="#686767"/>
      <path d="M372.69 55.55L369.24 57.5701C369.24 57.5701 369.22 57.5701 369.21 57.5701C369.2 57.5701 369.21 57.55 369.21 57.54L372.679 55.55H372.69Z" fill="#686767"/>
      <path d="M362.2 61.6999L355.16 65.8301C355.11 65.8601 355.04 65.84 355.01 65.79C354.98 65.74 355 65.6699 355.05 65.6399L362.13 61.5901C362.16 61.5701 362.2 61.5901 362.22 61.6101C362.24 61.6301 362.22 61.6799 362.2 61.6999Z" fill="#686767"/>
      <path d="M348.12 69.9499L341.08 74.07C340.99 74.12 340.87 74.09 340.82 74C340.77 73.91 340.8 73.79 340.89 73.74L347.97 69.6899C348.04 69.6499 348.13 69.67 348.17 69.75C348.21 69.82 348.19 69.9099 348.12 69.9499Z" fill="#686767"/>
      <path d="M334.03 78.1699L326.98 82.27C326.88 82.33 326.74 82.3 326.68 82.19C326.62 82.09 326.65 81.9499 326.76 81.8899L333.83 77.8101C333.93 77.7501 334.05 77.7899 334.11 77.8799C334.17 77.9799 334.13 78.0999 334.04 78.1599L334.03 78.1699Z" fill="#686767"/>
      <path d="M319.93 86.3798L312.88 90.4799C312.76 90.5499 312.61 90.5098 312.54 90.3898C312.47 90.2698 312.51 90.12 312.63 90.05L319.7 85.9699C319.81 85.9099 319.95 85.94 320.02 86.06C320.09 86.18 320.05 86.3098 319.94 86.3798H319.93Z" fill="#686767"/>
      <path d="M305.82 94.58L298.77 98.6799C298.64 98.7599 298.47 98.71 298.39 98.58C298.31 98.45 298.36 98.2799 298.49 98.1999L305.56 94.1201C305.69 94.0501 305.85 94.0899 305.92 94.2199C305.99 94.3499 305.95 94.51 305.82 94.58Z" fill="#686767"/>
      <path d="M291.72 102.78L284.67 106.88C284.52 106.97 284.34 106.92 284.25 106.77C284.16 106.62 284.21 106.43 284.36 106.35L291.43 102.27C291.57 102.19 291.75 102.24 291.83 102.38C291.91 102.52 291.86 102.7 291.72 102.78Z" fill="#686767"/>
      <path d="M277.61 110.98L270.56 115.08C270.4 115.17 270.19 115.12 270.1 114.96C270.01 114.8 270.06 114.59 270.22 114.5L277.29 110.42C277.44 110.33 277.64 110.38 277.73 110.54C277.82 110.69 277.77 110.89 277.61 110.98Z" fill="#686767"/>
      <path d="M263.51 119.18L256.46 123.28C256.28 123.38 256.06 123.32 255.96 123.15C255.86 122.97 255.92 122.75 256.09 122.65L263.16 118.57C263.33 118.47 263.54 118.53 263.64 118.7C263.74 118.87 263.68 119.08 263.51 119.18Z" fill="#686767"/>
      <path d="M249.4 127.38L242.33 131.46C242.16 131.56 241.94 131.5 241.85 131.33C241.76 131.16 241.81 130.95 241.98 130.85L249.03 126.75C249.21 126.65 249.43 126.71 249.53 126.88C249.63 127.06 249.57 127.28 249.4 127.38Z" fill="#686767"/>
      <path d="M235.26 135.53L228.189 139.61C228.039 139.7 227.839 139.65 227.749 139.49C227.659 139.33 227.71 139.14 227.87 139.05L234.919 134.95C235.079 134.86 235.289 134.91 235.379 135.07C235.469 135.23 235.42 135.44 235.26 135.53Z" fill="#686767"/>
      <path d="M221.13 143.68L214.06 147.76C213.92 147.84 213.74 147.79 213.66 147.65C213.58 147.51 213.63 147.33 213.77 147.25L220.82 143.15C220.97 143.06 221.16 143.11 221.24 143.26C221.33 143.41 221.28 143.6 221.13 143.68Z" fill="#686767"/>
      <path d="M206.989 151.83L199.919 155.91C199.789 155.98 199.63 155.94 199.56 155.81C199.49 155.68 199.529 155.52 199.659 155.45L206.709 151.35C206.839 151.27 207.01 151.32 207.09 151.45C207.17 151.58 207.119 151.75 206.989 151.83Z" fill="#686767"/>
      <path d="M192.86 159.98L185.79 164.06C185.68 164.12 185.53 164.09 185.47 163.97C185.41 163.86 185.44 163.71 185.55 163.65L192.6 159.55C192.72 159.48 192.87 159.52 192.94 159.64C193.01 159.76 192.97 159.91 192.85 159.98H192.86Z" fill="#686767"/>
      <path d="M178.73 168.13L171.66 172.21C171.56 172.27 171.44 172.23 171.38 172.13C171.32 172.03 171.36 171.91 171.45 171.85L178.5 167.75C178.6 167.69 178.74 167.72 178.8 167.83C178.86 167.93 178.83 168.07 178.72 168.13H178.73Z" fill="#686767"/>
      <path d="M164.59 176.28L157.51 180.33C157.44 180.37 157.35 180.35 157.3 180.27C157.26 180.2 157.28 180.11 157.35 180.06L164.39 175.94C164.48 175.89 164.6 175.92 164.65 176.01C164.7 176.1 164.67 176.22 164.58 176.27L164.59 176.28Z" fill="#686767"/>
      <path d="M150.43 184.38L143.35 188.43C143.35 188.43 143.28 188.43 143.26 188.41C143.24 188.38 143.26 188.34 143.28 188.32L150.32 184.19C150.37 184.16 150.44 184.18 150.47 184.23C150.5 184.28 150.48 184.35 150.43 184.38Z" fill="#686767"/>
      <path d="M136.27 192.49L132.8 194.48L136.25 192.46C136.25 192.46 136.27 192.46 136.28 192.46C136.28 192.46 136.28 192.48 136.28 192.49H136.27Z" fill="#686767"/>
      <path d="M308.57 30.49C230.97 74.29 143.68 122.98 65.6299 165.97C143.22 122.17 230.52 73.49 308.57 30.49Z" fill="#686767"/>
      <path d="M244.459 5.41992L240.969 7.37012C240.969 7.37012 240.949 7.37012 240.939 7.37012C240.939 7.36012 240.939 7.35009 240.939 7.34009L244.449 5.41992H244.459Z" fill="#686767"/>
      <path d="M233.8 11.3799L226.63 15.3899C226.58 15.4199 226.51 15.4001 226.48 15.3501C226.45 15.3001 226.47 15.2299 226.52 15.1999L233.73 11.27C233.76 11.25 233.8 11.27 233.82 11.3C233.84 11.33 233.82 11.3699 233.8 11.3899V11.3799Z" fill="#686767"/>
      <path d="M219.46 19.3898L212.29 23.3898C212.2 23.4398 212.08 23.41 212.03 23.32C211.98 23.23 212.01 23.1099 212.1 23.0599L219.31 19.12C219.38 19.08 219.47 19.1098 219.51 19.1798C219.55 19.2498 219.52 19.3398 219.45 19.3798L219.46 19.3898Z" fill="#686767"/>
      <path d="M205.11 27.3799L197.93 31.3602C197.82 31.4202 197.69 31.3801 197.63 31.2701C197.57 31.1601 197.61 31.03 197.71 30.97L204.91 27.0101C205.01 26.9601 205.13 26.9901 205.19 27.0901C205.24 27.1901 205.21 27.3102 205.11 27.3702V27.3799Z" fill="#686767"/>
      <path d="M190.75 35.3401L183.57 39.3201C183.45 39.3901 183.3 39.34 183.23 39.22C183.16 39.1 183.21 38.9499 183.33 38.8799L190.53 34.9199C190.64 34.8599 190.78 34.9 190.85 35.01C190.91 35.12 190.87 35.2601 190.76 35.3301L190.75 35.3401Z" fill="#686767"/>
      <path d="M176.38 43.3001L169.2 47.2801C169.07 47.3501 168.9 47.31 168.82 47.17C168.75 47.04 168.79 46.8701 168.93 46.7901L176.13 42.8301C176.26 42.7601 176.42 42.81 176.49 42.93C176.56 43.06 176.51 43.2201 176.39 43.2901L176.38 43.3001Z" fill="#686767"/>
      <path d="M162.02 51.27L154.84 55.25C154.69 55.33 154.5 55.2799 154.42 55.1299C154.34 54.9799 154.39 54.7899 154.54 54.7099L161.74 50.75C161.88 50.67 162.06 50.7201 162.14 50.8701C162.22 51.0101 162.17 51.19 162.03 51.27H162.02Z" fill="#686767"/>
      <path d="M147.65 59.2299L140.47 63.2099C140.31 63.2999 140.1 63.24 140.01 63.08C139.92 62.92 139.98 62.7101 140.14 62.6201L147.34 58.6599C147.5 58.5699 147.69 58.63 147.78 58.79C147.87 58.95 147.81 59.1399 147.65 59.2299Z" fill="#686767"/>
      <path d="M133.29 67.1899L126.111 71.1698C125.931 71.2698 125.711 71.2 125.611 71.03C125.511 70.85 125.58 70.63 125.75 70.53L132.95 66.57C133.12 66.48 133.33 66.5399 133.43 66.7099C133.53 66.8799 133.46 67.0899 133.29 67.1899Z" fill="#686767"/>
      <path d="M118.91 75.1399L111.71 79.1001C111.54 79.1901 111.32 79.1299 111.23 78.9599C111.14 78.7899 111.2 78.5699 111.37 78.4799L118.55 74.5C118.73 74.4 118.95 74.4699 119.05 74.6399C119.15 74.8199 119.08 75.0399 118.91 75.1399Z" fill="#686767"/>
      <path d="M104.52 83.06L97.32 87.02C97.16 87.11 96.9698 87.0498 96.8798 86.8898C96.7898 86.7298 96.85 86.5399 97.01 86.4499L104.19 82.4699C104.35 82.3799 104.56 82.44 104.65 82.6C104.74 82.76 104.68 82.97 104.52 83.06Z" fill="#686767"/>
      <path d="M90.1303 90.9699L82.9303 94.9299C82.7903 95.0099 82.6104 94.96 82.5304 94.81C82.4504 94.66 82.5003 94.4899 82.6403 94.4099L89.8204 90.4299C89.9704 90.3499 90.1604 90.4 90.2404 90.55C90.3204 90.7 90.2705 90.8899 90.1205 90.9699H90.1303Z" fill="#686767"/>
      <path d="M75.7297 98.8799L68.5298 102.84C68.3998 102.91 68.2397 102.86 68.1697 102.74C68.0997 102.62 68.1498 102.45 68.2698 102.38L75.4497 98.3999C75.5797 98.3299 75.7498 98.37 75.8298 98.51C75.9098 98.65 75.8597 98.8099 75.7197 98.8899L75.7297 98.8799Z" fill="#686767"/>
      <path d="M61.3399 106.79L54.1397 110.75C54.0297 110.81 53.8799 110.77 53.8199 110.66C53.7599 110.55 53.7997 110.4 53.9097 110.34L61.0899 106.36C61.2099 106.29 61.3598 106.34 61.4298 106.46C61.4998 106.58 61.4499 106.73 61.3299 106.8L61.3399 106.79Z" fill="#686767"/>
      <path d="M46.9402 114.7L39.7403 118.66C39.6403 118.71 39.5203 118.68 39.4603 118.58C39.4103 118.48 39.4403 118.36 39.5403 118.3L46.7203 114.32C46.8303 114.26 46.9603 114.3 47.0203 114.41C47.0803 114.52 47.0402 114.65 46.9302 114.71L46.9402 114.7Z" fill="#686767"/>
      <path d="M32.5501 122.61L25.3402 126.54C25.2702 126.58 25.18 126.55 25.14 126.48C25.1 126.41 25.13 126.32 25.2 126.28L32.3702 122.28C32.4602 122.23 32.58 122.26 32.63 122.35C32.68 122.44 32.6501 122.56 32.5601 122.61H32.5501Z" fill="#686767"/>
      <path d="M18.1301 130.48L10.9202 134.41C10.9202 134.41 10.8503 134.41 10.8303 134.38C10.8103 134.35 10.8303 134.31 10.8603 134.29L18.0303 130.28C18.0803 130.25 18.1502 130.27 18.1802 130.32C18.2102 130.37 18.1901 130.44 18.1401 130.47L18.1301 130.48Z" fill="#686767"/>
      <path d="M3.71021 138.34L0.200195 140.25L3.69019 138.3C3.69019 138.3 3.71021 138.3 3.72021 138.3C3.72021 138.31 3.72021 138.32 3.72021 138.33L3.71021 138.34Z" fill="#686767"/>
      <path d="M136.75 120.74V65.5301C136.75 59.8301 139.95 54.6201 145.03 52.0301L244.67 1.40995C246.89 0.279949 249.51 0.250115 251.75 1.33011L271.39 10.76C273.64 11.84 275.06 14.1101 275.06 16.6001V120.74L167.16 185.76C164.75 187.21 161.74 187.25 159.29 185.86L140.54 175.22C138.19 173.89 136.74 171.39 136.74 168.69V120.74H136.75Z" fill="white"/>
      <path d="M163.15 187.37C161.74 187.37 160.33 187.01 159.06 186.29L140.31 175.65C137.81 174.23 136.26 171.56 136.26 168.69V65.5301C136.26 59.6101 139.54 54.2702 144.81 51.5902L244.45 0.970071C246.79 -0.219929 249.61 -0.250017 251.98 0.879983L271.62 10.3102C274.02 11.4602 275.58 13.9302 275.58 16.6002V121.03L275.34 121.18L167.44 186.2C166.13 186.99 164.64 187.39 163.16 187.39L163.15 187.37ZM248.3 1.05015C247.13 1.05015 245.96 1.32021 244.9 1.86021L145.26 52.4801C140.32 54.9901 137.25 59.9901 137.25 65.5301V168.69C137.25 171.21 138.61 173.54 140.8 174.78L159.55 185.42C161.84 186.72 164.66 186.68 166.91 185.32L274.57 120.45V16.5902C274.57 14.3002 273.24 12.1901 271.18 11.2001L251.54 1.77012C250.52 1.28012 249.41 1.04014 248.3 1.04014V1.05015Z" fill="#070101"/>
      <path d="M271.92 10.8799L168.6 61.76C163.6 64.22 160.43 69.3099 160.43 74.8799V186.53" fill="white"/>
      <path d="M160.939 186.54H159.939V74.8899C159.939 69.0799 163.179 63.8801 168.379 61.3201L271.689 10.4399L272.129 11.3401L168.82 62.22C163.96 64.62 160.929 69.4699 160.929 74.8999V186.55L160.939 186.54Z" fill="#A3A3A3"/>
      <path d="M160.56 109.34L136.45 96.4099L136.93 95.53L160.56 108.21L274.61 47.21L275.08 48.0901L160.56 109.34Z" fill="#A3A3A3"/>
      <path d="M160.37 149.9L136.64 136.77L137.13 135.89L160.36 148.76L274.8 84.6699L275.29 85.54L160.37 149.9Z" fill="#A3A3A3"/>
      <path d="M313.128 150.023L247.092 181.535L247.953 183.34L313.99 151.828L313.128 150.023Z" fill="#070101"/>
      <path d="M280.04 142.24H278.04V157.54H280.04V142.24Z" fill="#070101"/>
      <path d="M286.756 170.85C289.006 165.404 287.694 159.692 283.825 158.094C279.956 156.495 274.995 159.614 272.745 165.061C270.494 170.507 271.806 176.218 275.676 177.817C279.545 179.415 284.505 176.296 286.756 170.85Z" fill="#52B54A"/>
      <path d="M277.73 178.6C276.94 178.6 276.16 178.45 275.42 178.15C271.3 176.45 269.87 170.43 272.22 164.74C273.35 162.01 275.17 159.75 277.35 158.38C279.58 156.97 281.93 156.66 283.95 157.5C288.07 159.2 289.5 165.22 287.15 170.91C285.22 175.58 281.33 178.61 277.73 178.61V178.6ZM281.62 158.04C280.41 158.04 279.14 158.44 277.89 159.23C275.89 160.49 274.2 162.59 273.15 165.13C271.01 170.31 272.2 175.74 275.81 177.23C279.42 178.72 284.09 175.71 286.24 170.53C288.38 165.35 287.19 159.92 283.58 158.43C282.96 158.18 282.3 158.05 281.62 158.05V158.04Z" fill="#070101"/>
      <path d="M328.754 150.278C331.004 144.831 329.692 139.12 325.823 137.521C321.954 135.923 316.993 139.042 314.743 144.488C312.492 149.935 313.805 155.646 317.674 157.244C321.543 158.843 326.503 155.724 328.754 150.278Z" fill="#52B54A"/>
      <path d="M319.73 158.04C318.94 158.04 318.16 157.89 317.42 157.59C315.4 156.75 313.96 154.88 313.37 152.3C312.79 149.79 313.1 146.9 314.23 144.17C315.36 141.44 317.18 139.18 319.36 137.81C321.59 136.41 323.94 136.09 325.96 136.93C327.99 137.77 329.42 139.64 330.02 142.22C330.6 144.73 330.29 147.62 329.16 150.34C327.23 155.01 323.34 158.03 319.74 158.03L319.73 158.04ZM323.62 137.48C322.41 137.48 321.13 137.88 319.89 138.67C317.89 139.93 316.2 142.03 315.15 144.56C314.1 147.1 313.82 149.77 314.34 152.08C314.86 154.33 316.09 155.96 317.8 156.66C321.41 158.15 326.08 155.14 328.23 149.96C329.28 147.42 329.56 144.75 329.04 142.44C328.52 140.19 327.29 138.56 325.58 137.86C324.96 137.61 324.3 137.48 323.63 137.48H323.62Z" fill="#070101"/>
      <path d="M246.604 188.654C248.854 183.208 247.542 177.497 243.673 175.898C239.804 174.3 234.844 177.419 232.593 182.865C230.343 188.311 231.655 194.022 235.524 195.621C239.393 197.22 244.354 194.101 246.604 188.654Z" fill="#52B54A"/>
      <path d="M237.58 196.41C236.79 196.41 236.01 196.26 235.27 195.96C233.25 195.12 231.81 193.25 231.22 190.67C230.64 188.16 230.95 185.28 232.08 182.55C233.21 179.82 235.03 177.56 237.21 176.19C239.44 174.78 241.79 174.47 243.81 175.31C245.84 176.15 247.27 178.02 247.87 180.6C248.45 183.11 248.14 186 247.01 188.73C245.08 193.4 241.19 196.42 237.59 196.42L237.58 196.41ZM241.47 175.84C240.26 175.84 238.98 176.24 237.74 177.03C235.74 178.29 234.05 180.39 233 182.93C231.95 185.47 231.669 188.14 232.189 190.45C232.709 192.7 233.939 194.33 235.649 195.03C239.259 196.52 243.93 193.51 246.08 188.33C247.13 185.79 247.409 183.12 246.889 180.81C246.369 178.56 245.139 176.93 243.429 176.23C242.809 175.98 242.15 175.85 241.48 175.85L241.47 175.84Z" fill="#070101"/>
      <path d="M252.67 127.9C251.52 130.59 251.14 133.52 250.24 136.31C249.51 138.59 247.91 140.28 246.83 142.34C245.75 144.4 245.3 146.39 244.15 148.38C243 150.37 241.75 153.83 240.09 155.41L230.74 164.3L216.69 155.65C209.63 152.11 210.78 140.72 210.78 140.72C212.11 114.29 232.27 110.41 232.27 110.41C232.2 101.91 233.89 93.5301 238.06 86.3301C238.32 85.8901 238.58 85.45 238.85 85.01C243.38 77.64 249.38 71.96 257.09 69.24C265.99 66.1 277.57 72.9999 285.76 76.3899C285.61 76.3299 283.86 79.78 283.69 79.98C282.38 81.44 280.17 81.94 278.45 82.74C273.72 84.94 269.03 87.3099 264.71 90.3899C262.81 91.7399 260.94 93.28 259.8 95.44C258.31 98.27 258.27 101.72 258.3 105C258.34 109.98 258.39 115.13 256.67 119.73C255.6 122.6 253.89 125.12 252.69 127.92L252.67 127.9Z" fill="#52B54A"/>
      <path d="M230.79 164.91L216.41 156.05C209.16 152.42 210.21 141.12 210.26 140.64C211.49 116.25 228.84 110.73 231.74 109.98C231.72 100.84 233.69 92.79 237.6 86.05C237.86 85.6 238.12 85.1599 238.39 84.7199C243.31 76.7099 249.54 71.3299 256.89 68.7399C264.36 66.1099 273.68 70.37 281.17 73.79C282.85 74.56 284.44 75.2798 285.92 75.8998L285.73 76.36L286.05 76.7299C285.88 76.9199 285.21 78.1698 284.81 78.9198C284.23 79.9898 284.13 80.1799 284.04 80.2799C283.01 81.4299 281.53 82 280.09 82.56C279.59 82.75 279.09 82.9498 278.63 83.1598C274.39 85.1298 269.45 87.5699 264.97 90.7599C263.15 92.0499 261.32 93.5398 260.21 95.6298C258.83 98.2398 258.74 101.4 258.76 104.95C258.8 110.03 258.84 115.19 257.1 119.86C256.49 121.48 255.68 123.01 254.9 124.48C254.28 125.64 253.64 126.84 253.12 128.07C252.45 129.65 252.03 131.36 251.63 133.01C251.36 134.14 251.07 135.3 250.71 136.43C250.23 137.92 249.4 139.16 248.6 140.37C248.14 141.07 247.66 141.79 247.26 142.54C246.79 143.44 246.42 144.37 246.07 145.27C245.65 146.36 245.21 147.48 244.57 148.59C244.21 149.21 243.84 149.99 243.45 150.8C242.6 152.57 241.63 154.59 240.43 155.73C240.33 155.82 231.08 164.62 231.08 164.62L230.8 164.89L230.79 164.91ZM261.99 68.9298C260.33 68.9298 258.73 69.1599 257.23 69.6899C250.1 72.1999 244.05 77.4399 239.25 85.2499C238.99 85.6799 238.73 86.12 238.47 86.56C234.6 93.25 232.68 101.26 232.75 110.38V110.8L232.34 110.88C232.29 110.88 227.33 111.89 222.28 116.05C217.63 119.89 211.94 127.28 211.26 140.72C211.25 140.86 210.23 151.83 216.9 155.18L230.66 163.65C236.72 157.896 239.757 155.013 239.77 155C240.81 154.01 241.73 152.09 242.55 150.39C242.95 149.56 243.33 148.77 243.71 148.11C244.31 147.07 244.72 146.03 245.15 144.93C245.51 144 245.89 143.04 246.39 142.09C246.81 141.3 247.3 140.55 247.78 139.84C248.58 138.64 249.33 137.51 249.77 136.15C250.12 135.05 250.4 133.9 250.67 132.8C251.08 131.11 251.51 129.36 252.21 127.7C252.75 126.43 253.4 125.21 254.03 124.03C254.8 122.58 255.6 121.09 256.18 119.53C257.85 115.04 257.81 109.97 257.78 105.07C257.75 101.29 257.85 97.9998 259.34 95.1798C260.55 92.8998 262.49 91.3199 264.4 89.9599C268.95 86.7199 273.94 84.2499 278.22 82.2599C278.7 82.0399 279.21 81.8398 279.74 81.6298C281.06 81.1198 282.43 80.59 283.3 79.62C283.35 79.54 283.66 78.9599 283.94 78.4499C284.41 77.5799 284.73 76.98 284.97 76.58C283.64 76.02 282.24 75.3699 280.77 74.6999C275.01 72.0599 268.13 68.9198 262.01 68.9198L261.99 68.9298Z" fill="#070101"/>
      <path d="M290.45 80.6698C290.45 80.6698 295.38 78.0799 299.41 80.0099C303.44 81.9399 310.11 86.4699 310.11 86.4699L302.58 95.7399C302.58 95.7399 289.05 93.3799 289.13 92.9399C289.21 92.4999 290.44 80.6798 290.44 80.6798L290.45 80.6698Z" fill="#52B54A"/>
      <path d="M302.79 96.2801L302.5 96.2301C289.2 93.9101 288.87 93.4401 288.73 93.2401L288.61 93.0701L288.64 92.8402C288.7 92.4902 289.45 85.3402 289.94 80.6202L289.97 80.3502L290.21 80.2301C290.42 80.1201 295.41 77.5401 299.62 79.5601C303.64 81.4801 310.11 85.8701 310.39 86.0501L310.84 86.3602L302.78 96.2801H302.79ZM289.68 92.66C291.13 93.14 297.94 94.41 302.39 95.2L309.39 86.5802C307.82 85.5402 302.56 82.07 299.2 80.46C295.92 78.89 291.92 80.5401 290.92 81.0001C290.73 82.8601 289.89 90.82 289.68 92.66Z" fill="#070101"/>
      <path d="M264.149 155.66L305.449 134.09C305.449 134.09 323.449 124.08 320.889 99.21C320.889 99.21 317.869 77.1601 293.879 90.5101C293.879 90.5101 292.939 70.2499 271.019 75.1399C271.019 75.1399 246.789 81.06 244.739 118.75C244.739 118.75 221.429 122.36 223.759 152.61C223.759 152.61 226.77 170.81 243.85 165.42L264.159 155.66" fill="white"/>
      <path d="M237.889 166.91C235.309 166.91 232.999 166.28 230.959 165.03C224.729 161.21 223.32 153.04 223.26 152.69C221.09 124.49 241.14 119.01 244.26 118.33C245.4 98.9402 252.51 88.12 258.3 82.45C264.64 76.23 270.649 74.71 270.909 74.65C277.929 73.08 283.569 73.8901 287.689 77.0401C292.889 81.0101 294.07 87.46 294.33 89.7C302.13 85.51 308.549 84.6101 313.429 87.0501C320.149 90.4101 321.359 98.78 321.409 99.14C323.969 124.06 305.899 134.43 305.719 134.53L264.389 156.11L244.08 165.87C241.88 166.57 239.819 166.92 237.909 166.92L237.889 166.91ZM277.389 74.88C275.449 74.88 273.36 75.13 271.12 75.63C270.89 75.69 247.229 81.9301 245.229 118.78L245.209 119.18L244.81 119.24C244.75 119.24 239.019 120.19 233.649 124.74C226.559 130.76 223.31 140.38 224.25 152.56C224.25 152.6 225.65 160.59 231.49 164.17C234.79 166.19 238.889 166.45 243.699 164.93L263.929 155.2L305.229 133.64C305.399 133.55 322.899 123.48 320.399 99.2501C320.399 99.1901 319.199 91.05 312.959 87.93C308.259 85.59 301.929 86.6 294.129 90.93L293.429 91.3202L293.389 90.5101C293.389 90.4301 292.93 82.2901 287.07 77.8101C284.49 75.8401 281.249 74.8502 277.399 74.8502L277.389 74.88Z" fill="black"/>
    </svg>
  )

  const handleDeleteClick = (subnet: any) => {
    const vmName = getVMAttachedToSubnet(subnet.id)
    setSelectedSubnet(subnet)
    
    if (vmName) {
      // Subnet is attached to a VM - show warning
      setAttachedVM(vmName)
      setDeleteStep("vm-warning")
    } else {
      // Subnet is not attached - show confirmation
      setDeleteStep("confirmation")
    }
  }

  const handleConfirmationProceed = () => {
    setDeleteStep("name-confirmation")
  }

  const handleFinalDelete = async () => {
    // Simulate delete API call
    await new Promise(resolve => setTimeout(resolve, 1000))
    console.log("Subnet deleted:", selectedSubnet.name)
    
    // Close modals
    setDeleteStep(null)
    setSelectedSubnet(null)
    setAttachedVM(null)
  }

  const handleCloseModals = () => {
    setDeleteStep(null)
    setSelectedSubnet(null)
    setAttachedVM(null)
  }

  const handleConnectSubnet = (subnet: any) => {
    setConnectionSubnet(subnet)
    setConnectionModalOpen(true)
  }

  const columns = [
    {
      key: "name",
      label: "Subnet Name",
      sortable: true,
      searchable: true,
      render: (value: string, row: any) => (
        <a
          href={`/networking/subnets/${row.id}`}
          className="text-primary font-medium hover:underline"
        >
          {value}
        </a>
      ),
    },
    {
      key: "vpcName",
      label: "VPC",
      searchable: true,
    },
    {
      key: "type",
      label: "Type",
      sortable: true,
      render: (value: string) => <StatusBadge status={value} />,
    },
    {
      key: "status",
      label: "Status",
      sortable: true,
      render: (value: string) => <StatusBadge status={value} />,
    },
    {
      key: "cidr",
      label: "CIDR",
    },
    {
      key: "gatewayIp",
      label: "Gateway IP",
    },
    {
      key: "createdOn",
      label: "Created On",
      sortable: true,
      render: (value: string) => {
        const date = new Date(value);
        return (
          <span className="text-muted-foreground">
            {date.toLocaleDateString()} {date.toLocaleTimeString()}
          </span>
        );
      },
    },
    {
      key: "actions",
      label: "Action",
      align: "right" as const,
      render: (_: any, row: any) => (
        <div className="flex justify-end">
          <ActionMenu
            editHref={`/networking/subnets/${row.id}/edit`}
            onCustomDelete={() => handleDeleteClick(row)}
            onConnectSubnet={() => handleConnectSubnet(row)}
            resourceName={row.name}
            resourceType="Subnet"
          />
        </div>
      ),
    },
  ]

  // Add actions property to each subnet row for DataTable
  const dataWithActions = filteredSubnets.map((subnet) => ({ ...subnet, actions: null }))

  const handleRefresh = () => {
    // Add your refresh logic here
    console.log("🔄 Refreshing Subnet data at:", new Date().toLocaleTimeString())
    // In a real app, this would typically:
    // - Refetch data from API
    // - Update state
    // - Show loading indicator
    // For demo purposes, we'll just log instead of reloading
    // window.location.reload()
  }

  return (
    <PageShell
      title="Subnets"
      description="Create subnets inside your VPC to neatly separate resources—keeping them secure and helping your network run faster."
      headerActions={
        <CreateButton href="/networking/subnets/create" label="Create Subnet" />
      }
    >
      {showEmptyState ? (
        <EmptyState
          {...getEmptyStateMessage('subnet')}
          icon={subnetIcon}
          onAction={() => window.location.href = '/networking/subnets/create'}
        />
      ) : (
        <ShadcnDataTable
          columns={columns}
          data={dataWithActions}
          searchableColumns={["name", "vpcName"]}
          pageSize={10}
          enableSearch={true}
          enableColumnVisibility={false}
          enablePagination={true}
          onRefresh={handleRefresh}
          enableAutoRefresh={true}
          enableVpcFilter={true}
          vpcOptions={[
            { value: "all", label: "All VPCs" },
            { value: "production-vpc", label: "production-vpc" },
            { value: "development-vpc", label: "development-vpc" },
            { value: "staging-vpc", label: "staging-vpc" },
            { value: "testing-vpc", label: "testing-vpc" },
            { value: "backup-vpc", label: "backup-vpc" },
            { value: "analytics-vpc", label: "analytics-vpc" },
            { value: "security-vpc", label: "security-vpc" },
            { value: "ml-vpc", label: "ml-vpc" },
            { value: "cdn-vpc", label: "cdn-vpc" },
            { value: "iot-vpc", label: "iot-vpc" },
            { value: "gaming-vpc", label: "gaming-vpc" },
            { value: "blockchain-vpc", label: "blockchain-vpc" },
            { value: "research-vpc", label: "research-vpc" },
          ]}
        />
      )}

      {/* Step 1: VM Attachment Warning Modal */}
      {selectedSubnet && attachedVM && (
        <DeleteSubnetVMWarningModal
          open={deleteStep === "vm-warning"}
          onClose={handleCloseModals}
          subnet={selectedSubnet}
          vmName={attachedVM}
        />
      )}

      {/* Step 2: Initial Confirmation Modal */}
      {selectedSubnet && (
        <DeleteSubnetConfirmationModal
          open={deleteStep === "confirmation"}
          onClose={handleCloseModals}
          subnet={selectedSubnet}
          onConfirm={handleConfirmationProceed}
        />
      )}

      {/* Step 3: Name Confirmation Modal */}
      {selectedSubnet && (
        <DeleteSubnetNameConfirmationModal
          open={deleteStep === "name-confirmation"}
          onClose={handleCloseModals}
          subnet={selectedSubnet}
          onConfirm={handleFinalDelete}
        />
      )}

      {/* Subnet Connection Modal */}
      <SubnetConnectionModal
        isOpen={connectionModalOpen}
        onClose={() => {
          setConnectionModalOpen(false)
          setConnectionSubnet(null)
        }}
        subnet={connectionSubnet}
      />
    </PageShell>
  )
}
