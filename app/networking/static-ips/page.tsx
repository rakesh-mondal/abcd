"use client"

import { PageShell } from "@/components/page-shell"
import { CreateButton } from "../../../components/create-button"
import { StatusBadge } from "../../../components/status-badge"
import { staticIPs } from "../../../lib/data"
import { ActionMenu } from "../../../components/action-menu"
import { ChevronUp, ChevronDown, RefreshCw } from "lucide-react"
import { useState } from "react"
import { useRouter } from "next/navigation"
import { ShadcnDataTable } from "@/components/ui/shadcn-data-table"
import { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from "../../../components/ui/select"
import { Button } from "@/components/ui/button"
import { useToast } from "../../../hooks/use-toast"
import { Dialog, DialogContent, DialogHeader, DialogTitle, DialogFooter } from "../../../components/ui/dialog"
import { filterDataForUser, shouldShowEmptyState, getEmptyStateMessage } from "../../../lib/demo-data-filter"
import { EmptyState } from "../../../components/ui/empty-state"
import { Card, CardContent } from "../../../components/ui/card"

const staticIpIcon = (
  <svg width="467" height="219" viewBox="0 0 467 219" fill="none" xmlns="http://www.w3.org/2000/svg" className="w-72">
    <g opacity="0.51">
      <path d="M82.4902 47.1499C188.96 81.7799 308.23 121.11 414.41 156.62C307.94 121.99 188.67 82.6599 82.4902 47.1499Z" fill="#686767"/>
      <path d="M163.171 11.92L174.611 15.53L174.581 15.64L163.171 11.92Z" fill="#686767"/>
      <path d="M186.051 19.14L197.501 22.76L197.401 23.0699L185.991 19.35L186.051 19.14Z" fill="#686767"/>
      <path d="M208.94 26.39L220.371 30.03L220.24 30.45L208.811 26.77L208.94 26.39Z" fill="#686767"/>
      <path d="M231.801 33.6801L243.231 37.3199L243.081 37.8101L231.661 34.13L231.801 33.6801Z" fill="#686767"/>
      <path d="M254.671 40.97L266.101 44.6101L265.921 45.1699L254.501 41.49L254.671 40.97Z" fill="#686767"/>
      <path d="M277.531 48.26L288.971 51.8999L288.761 52.53L277.341 48.8501L277.531 48.26Z" fill="#686767"/>
      <path d="M300.401 55.55L311.832 59.1899L311.612 59.8999L300.191 56.22L300.401 55.55Z" fill="#686767"/>
      <path d="M323.261 62.8601L334.681 66.55L334.471 67.2L323.041 63.55L323.261 62.8601Z" fill="#686767"/>
      <path d="M346.101 70.23L357.521 73.9099L357.341 74.49L345.9 70.8401L346.101 70.23Z" fill="#686767"/>
      <path d="M368.941 77.5901L380.362 81.27L380.201 81.78L368.771 78.1299L368.941 77.5901Z" fill="#686767"/>
      <path d="M391.791 84.95L403.211 88.6299L403.071 89.0701L391.631 85.4199L391.791 84.95Z" fill="#686767"/>
      <path d="M414.631 92.3201L426.051 96L425.931 96.3601L414.501 92.71L414.631 92.3201Z" fill="#686767"/>
      <path d="M437.461 99.71L448.871 103.42L448.821 103.58L437.381 99.97L437.461 99.71Z" fill="#686767"/>
      <path d="M460.281 107.14L466.111 109.04L460.261 107.19L460.281 107.14Z" fill="#686767"/>
      <path d="M4.80078 90.22L12.4307 92.6201C12.4307 92.6201 12.4607 92.6399 12.4507 92.6599C12.4507 92.6799 12.4306 92.6899 12.4106 92.6799L4.80078 90.22Z" fill="#686767"/>
      <path d="M20.0612 95.0199L27.6911 97.4198C27.6911 97.4198 27.7711 97.49 27.7511 97.54C27.7311 97.59 27.681 97.62 27.631 97.6L20.0212 95.1398C19.9912 95.1298 19.9711 95.09 19.9811 95.06C19.9911 95.03 20.0312 95.0099 20.0612 95.0199Z" fill="#686767"/>
      <path d="M35.3303 99.8201L42.9602 102.22C43.0402 102.25 43.0903 102.33 43.0603 102.42C43.0303 102.5 42.9503 102.55 42.8603 102.52L35.2502 100.06C35.1802 100.04 35.1501 99.9699 35.1701 99.8999C35.1901 99.8299 35.2603 99.8001 35.3303 99.8201Z" fill="#686767"/>
      <path d="M50.5912 104.62L58.2211 107.04C58.3211 107.07 58.3812 107.18 58.3512 107.29C58.3212 107.39 58.2112 107.45 58.1012 107.42L50.4811 104.98C50.3811 104.95 50.3312 104.84 50.3612 104.74C50.3912 104.64 50.5012 104.59 50.6012 104.62H50.5912Z" fill="#686767"/>
      <path d="M65.8402 109.46L73.4701 111.88C73.5901 111.92 73.6502 112.04 73.6102 112.16C73.5702 112.28 73.4502 112.34 73.3302 112.3L65.7101 109.86C65.6001 109.82 65.5402 109.71 65.5702 109.6C65.6102 109.49 65.7202 109.43 65.8302 109.46H65.8402Z" fill="#686767"/>
      <path d="M81.0911 114.3L88.721 116.72C88.851 116.76 88.9209 116.9 88.8809 117.02C88.8409 117.15 88.7011 117.22 88.5811 117.18L80.961 114.74C80.841 114.7 80.7711 114.57 80.8111 114.45C80.8511 114.33 80.9812 114.26 81.1012 114.3H81.0911Z" fill="#686767"/>
      <path d="M96.3407 119.14L103.971 121.56C104.111 121.6 104.191 121.75 104.141 121.89C104.101 122.03 103.951 122.11 103.811 122.06L96.1906 119.62C96.0606 119.58 95.9807 119.44 96.0307 119.3C96.0807 119.16 96.2108 119.09 96.3508 119.14H96.3407Z" fill="#686767"/>
      <path d="M111.591 123.98L119.221 126.4C119.371 126.45 119.45 126.61 119.41 126.76C119.36 126.91 119.201 126.99 119.051 126.95L111.43 124.51C111.29 124.46 111.211 124.31 111.251 124.17C111.291 124.03 111.451 123.95 111.591 123.99V123.98Z" fill="#686767"/>
      <path d="M126.841 128.81L134.471 131.23C134.631 131.28 134.721 131.45 134.671 131.61C134.621 131.77 134.451 131.86 134.291 131.81L126.671 129.37C126.511 129.32 126.431 129.15 126.481 129C126.531 128.85 126.701 128.76 126.851 128.81H126.841Z" fill="#686767"/>
      <path d="M142.091 133.65L149.711 136.07C149.881 136.12 149.981 136.31 149.921 136.48C149.871 136.65 149.681 136.75 149.511 136.69L141.891 134.25C141.721 134.2 141.631 134.02 141.681 133.85C141.731 133.68 141.911 133.59 142.081 133.64L142.091 133.65Z" fill="#686767"/>
      <path d="M157.341 138.49L164.971 140.91C165.151 140.97 165.261 141.16 165.201 141.35C165.141 141.53 164.951 141.64 164.761 141.58L157.141 139.14C156.961 139.08 156.861 138.89 156.921 138.71C156.981 138.53 157.171 138.43 157.341 138.49Z" fill="#686767"/>
      <path d="M172.601 143.33L180.22 145.75C180.42 145.81 180.52 146.02 180.46 146.22C180.4 146.42 180.19 146.52 179.99 146.46L172.371 144.02C172.181 143.96 172.08 143.76 172.14 143.57C172.2 143.38 172.401 143.28 172.591 143.34L172.601 143.33Z" fill="#686767"/>
      <path d="M187.841 148.18L195.461 150.62C195.651 150.68 195.751 150.88 195.691 151.07C195.631 151.26 195.431 151.36 195.241 151.3L187.621 148.88C187.431 148.82 187.321 148.61 187.381 148.42C187.441 148.23 187.651 148.12 187.841 148.18Z" fill="#686767"/>
      <path d="M203.081 153.06L210.701 155.5C210.881 155.56 210.971 155.75 210.921 155.92C210.861 156.1 210.681 156.19 210.501 156.14L202.871 153.72C202.691 153.66 202.591 153.47 202.641 153.28C202.701 153.1 202.891 153 203.081 153.05V153.06Z" fill="#686767"/>
      <path d="M218.321 157.94L225.941 160.38C226.111 160.43 226.201 160.61 226.141 160.78C226.091 160.95 225.911 161.04 225.751 160.98L218.131 158.56C217.961 158.51 217.861 158.32 217.921 158.15C217.971 157.98 218.161 157.88 218.331 157.94H218.321Z" fill="#686767"/>
      <path d="M233.55 162.82L241.17 165.26C241.32 165.31 241.41 165.47 241.36 165.63C241.31 165.78 241.15 165.87 240.99 165.82L233.36 163.4C233.2 163.35 233.11 163.18 233.16 163.02C233.21 162.86 233.38 162.77 233.54 162.82H233.55Z" fill="#686767"/>
      <path d="M248.791 167.7L256.41 170.14C256.55 170.19 256.631 170.34 256.591 170.48C256.541 170.62 256.39 170.7 256.25 170.66L248.63 168.24C248.48 168.19 248.4 168.03 248.45 167.89C248.5 167.74 248.661 167.66 248.801 167.71L248.791 167.7Z" fill="#686767"/>
      <path d="M264.031 172.58L271.651 175.02C271.781 175.06 271.851 175.2 271.811 175.33C271.771 175.46 271.631 175.53 271.501 175.49L263.871 173.07C263.731 173.03 263.661 172.88 263.701 172.74C263.741 172.6 263.891 172.53 264.031 172.57V172.58Z" fill="#686767"/>
      <path d="M279.271 177.46L286.891 179.9C287.011 179.94 287.081 180.07 287.041 180.19C287.001 180.31 286.871 180.38 286.751 180.34L279.121 177.92C278.991 177.88 278.931 177.75 278.961 177.62C279.001 177.49 279.131 177.43 279.261 177.46H279.271Z" fill="#686767"/>
      <path d="M294.51 182.34L302.13 184.78C302.24 184.81 302.3 184.93 302.26 185.04C302.23 185.15 302.11 185.21 302 185.17L294.37 182.75C294.26 182.71 294.19 182.59 294.23 182.48C294.27 182.37 294.39 182.3 294.5 182.34H294.51Z" fill="#686767"/>
      <path d="M309.74 187.23L317.36 189.68C317.45 189.71 317.5 189.81 317.47 189.9C317.44 189.99 317.34 190.04 317.25 190.01L309.62 187.6C309.52 187.57 309.46 187.46 309.49 187.36C309.52 187.26 309.63 187.2 309.73 187.23H309.74Z" fill="#686767"/>
      <path d="M324.97 192.13L332.581 194.59C332.641 194.61 332.67 194.67 332.65 194.73C332.63 194.79 332.57 194.82 332.51 194.8L324.88 192.4C324.8 192.38 324.76 192.29 324.78 192.22C324.8 192.14 324.89 192.1 324.96 192.12L324.97 192.13Z" fill="#686767"/>
      <path d="M340.201 197.05L347.811 199.51C347.811 199.51 347.851 199.55 347.841 199.57C347.841 199.6 347.801 199.61 347.781 199.6L340.151 197.2C340.151 197.2 340.081 197.14 340.101 197.1C340.111 197.06 340.161 197.03 340.201 197.05Z" fill="#686767"/>
      <path d="M355.421 201.97L360.231 203.53L355.401 202.01C355.401 202.01 355.38 202 355.39 201.99C355.4 201.98 355.401 201.97 355.411 201.98L355.421 201.97Z" fill="#686767"/>
      <g opacity="0.61">
        <path d="M437.26 76.1699L433.86 78.28C433.86 78.28 433.84 78.28 433.83 78.28C433.83 78.27 433.83 78.26 433.83 78.25L437.25 76.1699H437.26Z" fill="#686767"/>
        <path d="M427.061 82.51L420.261 86.74C420.211 86.77 420.141 86.7599 420.111 86.7099C420.081 86.6599 420.09 86.59 420.14 86.56L426.981 82.3999C427.011 82.3799 427.051 82.3999 427.071 82.4199C427.091 82.4499 427.071 82.49 427.051 82.51H427.061Z" fill="#686767"/>
        <path d="M413.471 90.9601L406.671 95.18C406.581 95.24 406.461 95.2102 406.411 95.1202C406.361 95.0302 406.381 94.9102 406.471 94.8602L413.311 90.7001C413.381 90.6601 413.471 90.6801 413.521 90.7501C413.561 90.8201 413.541 90.9101 413.471 90.9601Z" fill="#686767"/>
        <path d="M399.851 99.3899L393.041 103.59C392.941 103.65 392.801 103.62 392.741 103.52C392.681 103.42 392.711 103.28 392.811 103.22L399.641 99.04C399.741 98.98 399.861 99.0101 399.921 99.1101C399.981 99.2101 399.951 99.3299 399.851 99.3899Z" fill="#686767"/>
        <path d="M386.23 107.8L379.42 112C379.3 112.07 379.15 112.04 379.08 111.92C379.01 111.8 379.04 111.65 379.16 111.58L385.99 107.4C386.1 107.33 386.24 107.37 386.31 107.48C386.38 107.59 386.34 107.73 386.23 107.8Z" fill="#686767"/>
        <path d="M372.6 116.21L365.79 120.41C365.66 120.49 365.49 120.45 365.41 120.32C365.33 120.19 365.37 120.02 365.5 119.94L372.33 115.76C372.45 115.68 372.62 115.72 372.69 115.85C372.77 115.97 372.73 116.14 372.6 116.21Z" fill="#686767"/>
        <path d="M358.97 124.62L352.16 128.82C352.02 128.91 351.831 128.86 351.741 128.72C351.651 128.58 351.701 128.39 351.841 128.3L358.67 124.12C358.81 124.04 358.991 124.08 359.071 124.22C359.151 124.36 359.11 124.54 358.97 124.62Z" fill="#686767"/>
        <path d="M345.351 133.02L338.541 137.22C338.381 137.32 338.171 137.27 338.081 137.11C337.981 136.95 338.031 136.74 338.191 136.65L345.021 132.47C345.171 132.38 345.371 132.42 345.461 132.58C345.551 132.73 345.511 132.93 345.351 133.02Z" fill="#686767"/>
        <path d="M331.721 141.43L324.911 145.63C324.741 145.74 324.511 145.68 324.411 145.51C324.311 145.34 324.361 145.11 324.531 145.01L331.361 140.83C331.531 140.73 331.741 140.78 331.841 140.95C331.941 141.12 331.891 141.33 331.721 141.43Z" fill="#686767"/>
        <path d="M318.09 149.83L311.26 154.01C311.09 154.11 310.88 154.06 310.77 153.89C310.67 153.72 310.72 153.51 310.89 153.4L317.7 149.2C317.87 149.09 318.1 149.15 318.21 149.32C318.32 149.49 318.26 149.72 318.09 149.83Z" fill="#686767"/>
        <path d="M304.431 158.19L297.601 162.37C297.451 162.46 297.251 162.42 297.151 162.26C297.061 162.11 297.101 161.91 297.261 161.82L304.071 157.62C304.231 157.52 304.441 157.57 304.541 157.73C304.641 157.89 304.591 158.1 304.431 158.2V158.19Z" fill="#686767"/>
        <path d="M290.771 166.54L283.941 170.72C283.801 170.8 283.621 170.76 283.541 170.62C283.461 170.48 283.501 170.3 283.641 170.22L290.451 166.02C290.601 165.93 290.791 165.98 290.881 166.12C290.971 166.27 290.921 166.46 290.781 166.55L290.771 166.54Z" fill="#686767"/>
        <path d="M277.12 174.9L270.29 179.08C270.17 179.16 270 179.12 269.93 178.99C269.86 178.86 269.89 178.7 270.02 178.63L276.83 174.43C276.96 174.35 277.13 174.39 277.21 174.52C277.29 174.65 277.25 174.82 277.12 174.9Z" fill="#686767"/>
        <path d="M263.46 183.26L256.63 187.44C256.52 187.51 256.38 187.47 256.31 187.36C256.24 187.25 256.28 187.11 256.39 187.04L263.2 182.84C263.32 182.77 263.47 182.8 263.54 182.92C263.61 183.04 263.58 183.19 263.46 183.26Z" fill="#686767"/>
        <path d="M249.801 191.61L242.971 195.79C242.871 195.85 242.751 195.82 242.691 195.72C242.631 195.62 242.661 195.5 242.761 195.44L249.571 191.24C249.671 191.18 249.811 191.21 249.871 191.31C249.931 191.41 249.901 191.55 249.801 191.61Z" fill="#686767"/>
        <path d="M236.141 199.97L229.301 204.13C229.231 204.17 229.141 204.15 229.091 204.08C229.051 204.01 229.071 203.92 229.141 203.87L235.941 199.65C236.031 199.59 236.151 199.62 236.201 199.71C236.251 199.8 236.231 199.92 236.141 199.97Z" fill="#686767"/>
        <path d="M222.461 208.28L215.621 212.43C215.621 212.43 215.551 212.43 215.531 212.41C215.511 212.38 215.531 212.34 215.551 212.32L222.351 208.09C222.401 208.06 222.471 208.07 222.501 208.12C222.531 208.17 222.521 208.24 222.471 208.27L222.461 208.28Z" fill="#686767"/>
        <path d="M208.771 216.59L205.351 218.67L208.75 216.56C208.75 216.56 208.771 216.56 208.781 216.56C208.781 216.57 208.781 216.58 208.781 216.59H208.771Z" fill="#686767"/>
      </g>
      <path d="M373.149 51.1001L369.7 53.1201C369.7 53.1201 369.679 53.1201 369.669 53.1201C369.659 53.1201 369.669 53.1001 369.669 53.0901L373.139 51.1001H373.149Z" fill="#686767"/>
      <path d="M362.659 57.25L355.619 61.3799C355.569 61.4099 355.499 61.3901 355.469 61.3401C355.439 61.2901 355.459 61.2199 355.509 61.1899L362.589 57.1399C362.619 57.1199 362.659 57.1399 362.679 57.1599C362.699 57.1899 362.679 57.23 362.659 57.25Z" fill="#686767"/>
      <path d="M348.58 65.5L341.54 69.6201C341.45 69.6701 341.33 69.64 341.28 69.55C341.23 69.46 341.26 69.34 341.35 69.29L348.43 65.24C348.5 65.2 348.59 65.22 348.63 65.3C348.67 65.37 348.65 65.46 348.58 65.5Z" fill="#686767"/>
      <path d="M334.49 73.72L327.44 77.8201C327.34 77.8801 327.2 77.85 327.14 77.74C327.08 77.64 327.11 77.5 327.22 77.44L334.29 73.3601C334.39 73.3001 334.51 73.3399 334.57 73.4299C334.63 73.5299 334.59 73.65 334.5 73.71L334.49 73.72Z" fill="#686767"/>
      <path d="M320.379 81.9299L313.33 86.03C313.21 86.1 313.059 86.0599 312.989 85.9399C312.919 85.8199 312.96 85.67 313.08 85.6L320.149 81.52C320.259 81.46 320.399 81.4901 320.469 81.6101C320.539 81.7301 320.499 81.8599 320.389 81.9299H320.379Z" fill="#686767"/>
      <path d="M306.28 90.1298L299.23 94.2299C299.1 94.3099 298.93 94.2598 298.85 94.1298C298.77 93.9998 298.82 93.8299 298.95 93.7499L306.02 89.6698C306.15 89.5998 306.31 89.6399 306.38 89.7699C306.45 89.8999 306.41 90.0598 306.28 90.1298Z" fill="#686767"/>
      <path d="M292.18 98.33L285.13 102.43C284.98 102.52 284.8 102.47 284.71 102.32C284.62 102.17 284.67 101.98 284.82 101.9L291.89 97.82C292.03 97.74 292.21 97.7898 292.29 97.9298C292.37 98.0698 292.32 98.25 292.18 98.33Z" fill="#686767"/>
      <path d="M278.07 106.53L271.02 110.63C270.86 110.72 270.65 110.67 270.56 110.51C270.47 110.35 270.52 110.14 270.68 110.05L277.75 105.97C277.9 105.88 278.1 105.93 278.19 106.09C278.28 106.24 278.23 106.44 278.07 106.53Z" fill="#686767"/>
      <path d="M263.97 114.73L256.92 118.83C256.74 118.93 256.52 118.87 256.42 118.7C256.32 118.52 256.38 118.3 256.55 118.2L263.62 114.12C263.79 114.02 264 114.08 264.1 114.25C264.2 114.42 264.14 114.63 263.97 114.73Z" fill="#686767"/>
      <path d="M249.86 122.92L242.79 127C242.62 127.1 242.4 127.04 242.31 126.87C242.22 126.7 242.27 126.49 242.44 126.39L249.49 122.29C249.67 122.19 249.89 122.25 249.99 122.42C250.09 122.6 250.03 122.82 249.86 122.92Z" fill="#686767"/>
      <path d="M235.719 131.08L228.649 135.16C228.499 135.25 228.299 135.2 228.209 135.04C228.119 134.88 228.17 134.69 228.33 134.6L235.379 130.5C235.539 130.41 235.75 130.46 235.84 130.62C235.93 130.78 235.879 130.99 235.719 131.08Z" fill="#686767"/>
      <path d="M221.59 139.23L214.52 143.31C214.38 143.39 214.2 143.34 214.12 143.2C214.04 143.06 214.09 142.88 214.23 142.8L221.28 138.7C221.43 138.61 221.62 138.66 221.7 138.81C221.79 138.96 221.74 139.15 221.59 139.23Z" fill="#686767"/>
      <path d="M207.449 147.38L200.379 151.46C200.249 151.53 200.089 151.49 200.019 151.36C199.949 151.23 199.99 151.07 200.12 151L207.169 146.9C207.299 146.82 207.469 146.87 207.549 147C207.629 147.13 207.579 147.3 207.449 147.38Z" fill="#686767"/>
      <path d="M193.32 155.53L186.25 159.61C186.14 159.67 185.99 159.64 185.93 159.52C185.87 159.41 185.9 159.27 186.01 159.2L193.06 155.1C193.18 155.03 193.33 155.07 193.4 155.19C193.47 155.31 193.43 155.46 193.31 155.53H193.32Z" fill="#686767"/>
      <path d="M179.19 163.68L172.12 167.76C172.02 167.82 171.9 167.78 171.84 167.68C171.78 167.58 171.82 167.46 171.91 167.4L178.96 163.3C179.06 163.24 179.2 163.27 179.26 163.38C179.32 163.49 179.29 163.62 179.18 163.68H179.19Z" fill="#686767"/>
      <path d="M165.05 171.83L157.97 175.88C157.9 175.92 157.81 175.9 157.76 175.82C157.72 175.75 157.74 175.66 157.81 175.61L164.85 171.49C164.94 171.44 165.06 171.47 165.11 171.56C165.16 171.65 165.13 171.77 165.04 171.82L165.05 171.83Z" fill="#686767"/>
      <path d="M150.889 179.93L143.809 183.98C143.809 183.98 143.739 183.98 143.719 183.96C143.699 183.93 143.719 183.89 143.739 183.87L150.779 179.74C150.829 179.71 150.899 179.73 150.929 179.78C150.959 179.83 150.939 179.9 150.889 179.93Z" fill="#686767"/>
      <path d="M136.73 188.04L133.26 190.03L136.71 188.01C136.71 188.01 136.73 188.01 136.74 188.01C136.75 188.01 136.74 188.03 136.74 188.04H136.73Z" fill="#686767"/>
      <path d="M309.03 26.04C231.43 69.84 144.14 118.52 66.0898 161.52C143.68 117.72 230.98 69.04 309.03 26.04Z" fill="#686767"/>
      <path d="M244.92 0.969971L241.43 2.92004C241.43 2.92004 241.41 2.92004 241.4 2.92004C241.4 2.91004 241.4 2.90001 241.4 2.89001L244.91 0.97998L244.92 0.969971Z" fill="#686767"/>
      <path d="M234.26 6.93004L227.09 10.9399C227.04 10.9699 226.97 10.95 226.94 10.9C226.91 10.85 226.93 10.78 226.98 10.75L234.19 6.81993C234.22 6.79993 234.26 6.81996 234.28 6.84996C234.3 6.87996 234.28 6.91993 234.25 6.93993L234.26 6.93004Z" fill="#686767"/>
      <path d="M219.92 14.9399L212.75 18.9399C212.66 18.9899 212.54 18.96 212.49 18.87C212.44 18.78 212.47 18.66 212.56 18.61L219.77 14.67C219.84 14.63 219.93 14.66 219.97 14.73C220.01 14.8 219.98 14.89 219.91 14.93L219.92 14.9399Z" fill="#686767"/>
      <path d="M205.571 22.92L198.391 26.9C198.281 26.96 198.151 26.92 198.091 26.81C198.031 26.7 198.071 26.57 198.171 26.51L205.371 22.55C205.471 22.5 205.591 22.53 205.651 22.63C205.701 22.73 205.671 22.85 205.571 22.91V22.92Z" fill="#686767"/>
      <path d="M191.2 30.89L184.02 34.87C183.9 34.94 183.75 34.89 183.68 34.77C183.61 34.65 183.661 34.5001 183.781 34.4301L190.98 30.47C191.09 30.41 191.231 30.4501 191.301 30.5601C191.361 30.6701 191.32 30.81 191.21 30.88L191.2 30.89Z" fill="#686767"/>
      <path d="M176.84 38.85L169.66 42.8301C169.53 42.9001 169.36 42.86 169.28 42.72C169.21 42.59 169.25 42.4201 169.39 42.3401L176.59 38.38C176.72 38.31 176.88 38.36 176.95 38.48C177.02 38.61 176.97 38.77 176.85 38.84L176.84 38.85Z" fill="#686767"/>
      <path d="M162.47 46.8101L155.29 50.7901C155.14 50.8701 154.95 50.82 154.87 50.67C154.79 50.52 154.84 50.33 154.99 50.25L162.19 46.2901C162.33 46.2101 162.51 46.2599 162.59 46.4099C162.67 46.5499 162.62 46.7301 162.48 46.8101H162.47Z" fill="#686767"/>
      <path d="M148.11 54.78L140.93 58.76C140.77 58.85 140.56 58.7898 140.47 58.6298C140.38 58.4698 140.44 58.2599 140.6 58.1699L147.8 54.2099C147.96 54.1199 148.15 54.18 148.24 54.34C148.33 54.5 148.27 54.69 148.11 54.78Z" fill="#686767"/>
      <path d="M133.74 62.7399L126.56 66.7199C126.38 66.8199 126.16 66.75 126.06 66.58C125.96 66.41 126.03 66.18 126.2 66.08L133.4 62.12C133.57 62.03 133.78 62.0899 133.88 62.2599C133.98 62.4299 133.91 62.6399 133.74 62.7399Z" fill="#686767"/>
      <path d="M119.37 70.6899L112.17 74.6499C112 74.7399 111.78 74.68 111.69 74.51C111.6 74.34 111.66 74.12 111.83 74.03L119.01 70.05C119.19 69.95 119.41 70.0199 119.51 70.1899C119.61 70.3599 119.54 70.5899 119.37 70.6899Z" fill="#686767"/>
      <path d="M104.981 78.6001L97.7808 82.5601C97.6208 82.6501 97.4308 82.5899 97.3408 82.4299C97.2508 82.2699 97.3107 82.08 97.4707 81.99L104.651 78.01C104.811 77.92 105.021 77.9799 105.111 78.1399C105.201 78.2999 105.141 78.5101 104.981 78.6001Z" fill="#686767"/>
      <path d="M90.5806 86.52L83.3804 90.48C83.2404 90.56 83.0605 90.5101 82.9805 90.3601C82.9005 90.2201 82.9506 90.0399 83.0906 89.9599L90.2706 85.98C90.4206 85.9 90.6105 85.9501 90.6905 86.1001C90.7705 86.2501 90.7206 86.44 90.5706 86.52H90.5806Z" fill="#686767"/>
      <path d="M76.1897 94.43L68.9897 98.3899C68.8597 98.4599 68.6996 98.4101 68.6296 98.2901C68.5596 98.1601 68.6097 98 68.7297 97.93L75.9097 93.95C76.0397 93.88 76.2098 93.9201 76.2898 94.0601C76.3698 94.2001 76.3197 94.36 76.1797 94.44L76.1897 94.43Z" fill="#686767"/>
      <path d="M61.7998 102.34L54.5999 106.3C54.4899 106.36 54.3398 106.32 54.2798 106.21C54.2198 106.1 54.2599 105.95 54.3699 105.89L61.5498 101.91C61.6698 101.84 61.8197 101.89 61.8897 102.01C61.9597 102.13 61.9098 102.28 61.7898 102.35L61.7998 102.34Z" fill="#686767"/>
      <path d="M47.4002 110.25L40.2002 114.21C40.1002 114.26 39.9802 114.23 39.9202 114.13C39.8702 114.03 39.9003 113.91 40.0003 113.85L47.1802 109.87C47.2902 109.81 47.4203 109.85 47.4803 109.96C47.5403 110.07 47.5002 110.2 47.3902 110.26L47.4002 110.25Z" fill="#686767"/>
      <path d="M33.0099 118.16L25.7999 122.09C25.7299 122.13 25.64 122.1 25.6 122.03C25.56 121.96 25.5898 121.87 25.6598 121.83L32.83 117.83C32.92 117.78 33.04 117.81 33.09 117.9C33.14 117.99 33.1099 118.11 33.0199 118.16H33.0099Z" fill="#686767"/>
      <path d="M18.5903 126.03L11.3801 129.96C11.3801 129.96 11.3103 129.96 11.2903 129.93C11.2703 129.9 11.2903 129.86 11.3203 129.84L18.4902 125.83C18.5402 125.8 18.6101 125.82 18.6401 125.87C18.6701 125.92 18.6503 125.99 18.6003 126.02L18.5903 126.03Z" fill="#686767"/>
      <path d="M4.17017 133.89L0.660156 135.8L4.15015 133.85C4.15015 133.85 4.17018 133.85 4.18018 133.85C4.18018 133.86 4.18018 133.87 4.18018 133.88L4.17017 133.89Z" fill="#686767"/>
    </g>
    <path d="M158.15 164.88C156 163.85 154.62 161.68 154.59 159.3L153.59 68.5901C153.53 63.0101 156.63 57.8801 161.59 55.3401L248.07 11.5799C250.33 10.4399 252.99 10.4 255.28 11.49L270.65 18.81C272.74 19.81 274.1 21.8899 274.16 24.2099L276.5 112.85C276.63 117.81 274 122.43 269.66 124.85L182.29 173.54C180.51 174.53 178.36 174.6 176.52 173.72L158.13 164.89L158.15 164.88Z" fill="white"/>
    <path d="M179.24 174.82C178.24 174.82 177.24 174.6 176.31 174.15L157.92 165.32C155.58 164.2 154.11 161.89 154.08 159.29L153.08 68.5801C153.02 62.7701 156.19 57.5201 161.35 54.8701L247.84 11.1C250.22 9.9 253.08 9.86004 255.49 11.01L270.86 18.33C273.13 19.41 274.58 21.6501 274.65 24.1601L276.99 112.8C277.13 117.96 274.41 122.73 269.9 125.25L182.53 173.94C181.51 174.51 180.37 174.8 179.23 174.8L179.24 174.82ZM158.36 164.43L176.75 173.26C178.44 174.07 180.42 174.01 182.05 173.1L269.42 124.41C273.61 122.08 276.13 117.65 276 112.86L273.66 24.22C273.6 22.08 272.37 20.18 270.44 19.26L255.07 11.94C252.94 10.92 250.41 10.95 248.3 12.02L161.82 55.7801C156.99 58.2501 154.03 63.1601 154.09 68.5801L155.09 159.29C155.11 161.5 156.37 163.47 158.36 164.43Z" fill="#686767"/>
    <path d="M172.449 171.27L171.399 75.52C171.359 71.5 173.559 67.7999 177.119 65.9199L268.209 17.8101" fill="white"/>
    <path d="M171.949 171.27L170.899 75.52C170.849 71.29 173.149 67.44 176.879 65.47L267.969 17.36L268.439 18.24L177.349 66.3501C173.949 68.1501 171.859 71.65 171.899 75.5L172.949 171.25H171.949V171.27Z" fill="#A3A3A3"/>
    <path d="M223.709 86.15C222.699 86.15 221.709 85.9401 220.789 85.5001C215.919 83.1901 214.899 75.5101 218.449 68.0201C221.999 60.5301 228.599 56.4601 233.469 58.7701C235.869 59.9101 237.409 62.4101 237.799 65.8101C238.169 69.0401 237.469 72.75 235.809 76.24C232.929 82.31 228.049 86.1299 223.709 86.1299V86.15ZM230.61 60.15C227.08 60.15 222.729 63.6599 220.259 68.8799C217.289 75.1399 217.929 81.93 221.649 83.7C225.379 85.47 231.029 81.67 233.999 75.4C235.499 72.24 236.139 68.9201 235.809 66.0501C235.499 63.3601 234.36 61.4101 232.61 60.5801C231.99 60.2901 231.32 60.15 230.61 60.15Z" fill="#52B54A"/>
    <path d="M199.43 143.51C198.42 143.51 197.43 143.3 196.51 142.86C191.64 140.55 190.61 132.87 194.17 125.38C195.83 121.88 198.25 118.99 200.99 117.24C203.88 115.39 206.79 115 209.19 116.14C211.59 117.28 213.13 119.78 213.52 123.18C213.89 126.41 213.19 130.12 211.53 133.61C208.65 139.68 203.77 143.5 199.43 143.5V143.51ZM206.29 117.5C204.98 117.5 203.53 117.98 202.06 118.92C199.63 120.48 197.47 123.08 195.97 126.24C193 132.5 193.64 139.29 197.36 141.06C201.09 142.83 206.74 139.03 209.71 132.76C211.21 129.6 211.85 126.28 211.52 123.41C211.21 120.72 210.07 118.77 208.32 117.94C207.7 117.64 207.01 117.5 206.29 117.5Z" fill="#52B54A"/>
    <path d="M245.33 121.18C244.31 121.18 243.34 120.97 242.44 120.54C240.04 119.4 238.5 116.9 238.11 113.5C237.74 110.27 238.44 106.56 240.1 103.07C243.65 95.5801 250.25 91.5101 255.12 93.8201C259.99 96.1301 261.02 103.81 257.46 111.3C255.8 114.8 253.38 117.69 250.64 119.44C248.84 120.6 247.02 121.18 245.33 121.18ZM252.26 95.19C248.72 95.19 244.38 98.7 241.91 103.92C240.41 107.08 239.77 110.4 240.1 113.27C240.41 115.96 241.55 117.91 243.3 118.74C245.05 119.57 247.28 119.22 249.56 117.76C251.99 116.2 254.15 113.6 255.65 110.44C258.62 104.18 257.98 97.3902 254.26 95.6202C253.64 95.3302 252.97 95.19 252.26 95.19Z" fill="#52B54A"/>
    <path d="M220.243 84.0536L205.727 115.967L207.547 116.795L222.064 84.8817L220.243 84.0536Z" fill="#52B54A"/>
    <path d="M232.206 80.2919L230.678 81.5823L243.988 97.3439L245.516 96.0536L232.206 80.2919Z" fill="#52B54A"/>
    <path d="M238.585 111.111L212.039 122.177L212.809 124.023L239.354 112.957L238.585 111.111Z" fill="#52B54A"/>
    <path d="M240.23 146.19C238.76 145.49 237.82 144.01 237.8 142.38L237.12 80.45C237.08 76.64 239.19 73.14 242.58 71.4L301.62 41.5201C303.16 40.7401 304.98 40.72 306.54 41.46L317.03 46.46C318.46 47.14 319.38 48.56 319.42 50.14L321.02 110.66C321.11 114.05 319.31 117.2 316.35 118.85L256.7 152.09C255.49 152.77 254.02 152.81 252.76 152.21L240.21 146.18L240.23 146.19Z" fill="white"/>
    <path d="M254.629 153.13C253.919 153.13 253.22 152.97 252.56 152.66L240.01 146.64C238.36 145.85 237.32 144.22 237.3 142.38L236.62 80.45C236.58 76.43 238.77 72.78 242.35 70.95L301.399 41.0701C303.069 40.2301 305.07 40.2001 306.76 41.0101L317.25 46.0101C318.86 46.7701 319.879 48.35 319.929 50.13L321.53 110.65C321.62 114.24 319.74 117.55 316.61 119.29L256.96 152.53C256.24 152.93 255.439 153.13 254.629 153.13ZM240.45 145.73L253 151.75C254.1 152.28 255.4 152.24 256.48 151.64L316.129 118.4C318.939 116.84 320.63 113.87 320.54 110.66L318.94 50.14C318.9 48.74 318.09 47.5 316.83 46.89L306.34 41.89C304.93 41.22 303.25 41.24 301.86 41.94L242.82 71.8201C239.58 73.4801 237.589 76.78 237.629 80.42L238.31 142.35C238.33 143.8 239.15 145.09 240.45 145.72V145.73Z" fill="#686767"/>
    <path d="M249.99 150.54L249.27 85.1699C249.24 82.4299 250.75 79.9001 253.17 78.6201L315.36 45.78" fill="white"/>
    <path d="M249.49 150.55L248.77 85.1799C248.74 82.2399 250.33 79.5499 252.94 78.1799L315.13 45.3401L315.6 46.22L253.41 79.0601C251.14 80.2601 249.75 82.5999 249.78 85.1699L250.5 150.54H249.5L249.49 150.55Z" fill="#A3A3A3"/>
    <path d="M284.97 92.7399C284.23 92.7399 283.52 92.58 282.86 92.27C279.38 90.62 278.61 85.1899 281.11 79.9099C282.27 77.4699 283.96 75.4499 285.88 74.2199C287.95 72.8999 290.04 72.6199 291.78 73.4499C295.26 75.0999 296.03 80.53 293.53 85.81C292.37 88.25 290.68 90.27 288.76 91.5C287.48 92.32 286.18 92.7399 284.97 92.7399ZM289.68 74.9899C288.85 74.9899 287.92 75.2999 286.97 75.9099C285.36 76.9399 283.92 78.67 282.93 80.77C280.98 84.89 281.34 89.3299 283.73 90.4599C284.83 90.9799 286.23 90.75 287.7 89.81C289.31 88.78 290.74 87.0499 291.74 84.9399C293.69 80.8199 293.33 76.38 290.94 75.25C290.56 75.07 290.14 74.9799 289.69 74.9799L289.68 74.9899Z" fill="#52B54A"/>
    <path d="M268.389 131.91C267.649 131.91 266.939 131.75 266.279 131.44C264.539 130.61 263.429 128.82 263.139 126.38C262.879 124.11 263.369 121.52 264.529 119.08C265.689 116.64 267.379 114.62 269.299 113.39C271.369 112.06 273.459 111.79 275.199 112.62C276.939 113.45 278.049 115.24 278.339 117.68C278.599 119.95 278.109 122.54 276.949 124.98C275.789 127.42 274.099 129.44 272.179 130.67C270.899 131.49 269.599 131.91 268.389 131.91ZM273.1 114.16C272.27 114.16 271.339 114.47 270.389 115.08C268.779 116.11 267.35 117.84 266.35 119.94C265.35 122.05 264.919 124.25 265.139 126.15C265.339 127.88 266.049 129.11 267.149 129.63C268.239 130.15 269.65 129.92 271.12 128.98C272.73 127.95 274.169 126.22 275.159 124.12C276.149 122.02 276.59 119.81 276.37 117.91C276.17 116.18 275.46 114.95 274.36 114.43C273.98 114.25 273.56 114.16 273.11 114.16H273.1Z" fill="#52B54A"/>
    <path d="M299.759 116.67C299.019 116.67 298.309 116.52 297.639 116.2C294.159 114.55 293.389 109.12 295.889 103.84C298.389 98.56 303.079 95.7198 306.559 97.3798C310.039 99.0298 310.809 104.46 308.309 109.74C306.289 114 302.839 116.67 299.759 116.67ZM304.459 98.9198C302.179 98.9198 299.339 101.25 297.699 104.7C295.749 108.82 296.109 113.26 298.499 114.39C300.889 115.52 304.559 113 306.509 108.88C308.459 104.76 308.099 100.32 305.709 99.1899C305.319 99.0099 304.899 98.9198 304.459 98.9198Z" fill="#52B54A"/>
    <path d="M282.31 90.8297L272.397 112.621L274.218 113.449L284.13 91.6579L282.31 90.8297Z" fill="#52B54A"/>
    <path d="M291.023 88.2448L289.495 89.5352L298.579 100.293L300.107 99.0023L291.023 88.2448Z" fill="#52B54A"/>
    <path d="M295.011 109.236L276.893 116.789L277.662 118.635L295.781 111.082L295.011 109.236Z" fill="#52B54A"/>
  </svg>
)

export default function StaticIPListPage() {
  const router = useRouter()
  const { toast } = useToast()
  const [isDeleteModalOpen, setIsDeleteModalOpen] = useState(false)
  const [isVMAttachedModalOpen, setIsVMAttachedModalOpen] = useState(false)
  const [selectedStaticIP, setSelectedStaticIP] = useState<any>(null)

  // Filter data based on user type for demo
  const filteredStaticIPs = filterDataForUser(staticIPs)
  const showEmptyState = shouldShowEmptyState() && filteredStaticIPs.length === 0

  const handleDeleteClick = (staticIP: any) => {
    setSelectedStaticIP(staticIP)
    
    // Check if IP is attached to a VM
    if (staticIP.assignedVMName && staticIP.assignedVMName !== null) {
      // Show VM attached modal
      setIsVMAttachedModalOpen(true)
    } else {
      // Show normal delete confirmation modal
      setIsDeleteModalOpen(true)
    }
  }

  const handleDeleteConfirm = async () => {
    if (!selectedStaticIP) return
    
    // In a real app, this would delete the static IP via API
    console.log("Unreserving Static IP:", selectedStaticIP.ipAddress)
    
    // Simulate API call delay
    await new Promise(resolve => setTimeout(resolve, 1000))
    
    // Show success toast
    toast({
      title: "IP address unreserved successfully",
      description: `IP address "${selectedStaticIP.ipAddress}" has been unreserved successfully`,
    })
    
    // Close modal and clear selection
    setIsDeleteModalOpen(false)
    setSelectedStaticIP(null)
    
    // In a real app, you would refresh the data here
    // For now, we'll just reload the page
    window.location.reload()
  }

  const handleVMAttachedModalClose = () => {
    setIsVMAttachedModalOpen(false)
    setSelectedStaticIP(null)
  }

  const columns = [
    {
      key: "ipAddress",
      label: "IP Address",
      sortable: true,
      searchable: true,
    },
    {
      key: "subnetName",
      label: "Subnet Name",
      sortable: true,
      searchable: true,
    },
    {
      key: "type",
      label: "Type",
      sortable: true,
      render: (value: string) => (
        <span className={`inline-flex items-center px-2 py-1 rounded-full text-xs font-medium ${
          value === 'IPv4' 
            ? 'bg-blue-100 text-blue-800' 
            : 'bg-purple-100 text-purple-800'
        }`}>
          {value}
        </span>
      ),
    },
    {
      key: "accessType",
      label: "Access Type",
      sortable: true,
      render: (value: string) => (
        <span className={`inline-flex items-center px-2 py-1 rounded-full text-xs font-medium ${
          value === 'Public' 
            ? 'bg-green-100 text-green-800' 
            : 'bg-gray-100 text-gray-800'
        }`}>
          {value}
        </span>
      ),
    },
    {
      key: "assignedVMName",
      label: "Assigned VM",
      searchable: true,
      render: (value: string) => value || <span className="italic text-muted-foreground">Not assigned</span>,
    },
    {
      key: "actions",
      label: "Action",
      align: "right" as const,
      render: (_: any, row: any) => (
        <div className="flex justify-end">
          <ActionMenu
            onCustomDelete={() => handleDeleteClick(row)}
            resourceName={row.ipAddress}
            resourceType="Static IP"
            deleteLabel="Unreserve"
          />
        </div>
      ),
    },
  ]

  // Add actions property to each static IP row for DataTable
  const dataWithActions = filteredStaticIPs.map((ip) => ({ ...ip, actions: null }))

  // VPC options for filtering
  const vpcOptions = [
    { value: "all", label: "All VPCs" },
    { value: "production-vpc", label: "production-vpc" },
    { value: "development-vpc", label: "development-vpc" },
    { value: "staging-vpc", label: "staging-vpc" },
    { value: "ml-vpc", label: "ml-vpc" },
    { value: "cdn-vpc", label: "cdn-vpc" },
    { value: "gaming-vpc", label: "gaming-vpc" },
    { value: "analytics-vpc", label: "analytics-vpc" },
    { value: "backup-vpc", label: "backup-vpc" },
  ]

  const handleRefresh = () => {
    window.location.reload()
  }

  return (
    <PageShell
      title="Static IP Addresses"
      description="Reserve and manage static IP addresses for your cloud resources. Assign IPs to VMs and other services as needed."
      headerActions={
        <CreateButton href="/networking/static-ips/create" label="Reserve IP Address" />
      }
    >
      {showEmptyState ? (
        <Card className="mt-8">
          <CardContent>
            <EmptyState
              {...getEmptyStateMessage('static-ips')}
              icon={staticIpIcon}
            />
          </CardContent>
        </Card>
      ) : (
        <ShadcnDataTable
          columns={columns}
          data={dataWithActions}
          searchableColumns={["ipAddress", "subnetName", "assignedVMName"]}
          defaultSort={{ column: "ipAddress", direction: "asc" }}
          pageSize={10}
          enableSearch={true}
          enableColumnVisibility={false}
          enablePagination={true}
          onRefresh={handleRefresh}
          enableVpcFilter={true}
          vpcOptions={vpcOptions}
        />
      )}

      {/* Unreserve IP Confirmation Modal */}
      <Dialog open={isDeleteModalOpen} onOpenChange={setIsDeleteModalOpen}>
        <DialogContent className="sm:max-w-md">
          <DialogHeader>
            <DialogTitle>Are you sure you want to unreserve the IP address?</DialogTitle>
          </DialogHeader>
          <div className="py-4">
            <p className="text-sm text-muted-foreground">
              Please note once the IP address is unreserved, it is not sure that you will get the same IP address again when you try to reserve a IP address
            </p>
          </div>
          <DialogFooter className="flex justify-end gap-2">
            <Button
              variant="outline"
              onClick={() => {
                setIsDeleteModalOpen(false)
                setSelectedStaticIP(null)
              }}
            >
              Cancel
            </Button>
            <Button
              variant="destructive"
              onClick={handleDeleteConfirm}
            >
              Unreserve IP Address
            </Button>
          </DialogFooter>
        </DialogContent>
      </Dialog>

      {/* VM Attached Alert Modal */}
      <Dialog open={isVMAttachedModalOpen} onOpenChange={setIsVMAttachedModalOpen}>
        <DialogContent className="sm:max-w-md">
          <DialogHeader>
            <DialogTitle>IP address is associated with a VM</DialogTitle>
          </DialogHeader>
          <div className="py-4">
            <p className="text-sm text-muted-foreground">
              The <span className="font-medium text-foreground">{selectedStaticIP?.ipAddress}</span> is attached with a VM <span className="font-medium text-foreground">{selectedStaticIP?.assignedVMName}</span>. Please detach the IP address from the VM before unreserving.
            </p>
          </div>
          <DialogFooter>
            <Button onClick={handleVMAttachedModalClose}>
              OK
            </Button>
          </DialogFooter>
        </DialogContent>
      </Dialog>
    </PageShell>
  )
}
